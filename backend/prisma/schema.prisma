generator client {
  provider = "prisma-client-js"
  
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
 
}

model Bank {
  id        Int       @id @default(autoincrement())
  name      String    @unique
  code      String    @unique
  createdAt DateTime  @default(now())

  verifications Verification[]
}

model Verification {
  id               Int       @id @default(autoincrement())
  bankId           Int
  reference        String
  amount           Float?
  status           String    @default("pending") // pending, success, failed
  transactionDate  DateTime?
  provider         String    // bank code: CBE, TELEBIRR, AWASH
  payerName        String?   // from PDF
  payerAccount     String?   // masked
  receiverName     String?   // from PDF
  receiverAccount  String?   // masked
  reason           String?   // optional note
  rawData          Json?     // store original parsed data for auditing/debugging
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  bank Bank @relation(fields: [bankId], references: [id])
  uploadedFiles  UploadedFile[]
}

model UploadedFile {
  id              Int      @id @default(autoincrement())
  verificationId  Int
  filePath        String
  fileType        String
  uploadedAt      DateTime @default(now())

  verification Verification @relation(fields: [verificationId], references: [id])
}
